<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SynthTnT</title>
    <link rel="stylesheet" href="style.css">
    
</head>
<body>
    <div id="welcome">
        <h1><span class="ombre-text">Welcome to SynthTnT!</span></h1>
        <p>Interact with the first Trinidadian and Tobagonian English Creole Text to Speech Application:</p>
        <div><textarea id="textarea" placeholder="Enter text here..."></textarea><br></div>
        <button id="submit-btn" onclick="getData()"><b>Submit Text</b></button>
    </div>
    <div class = "player">
        <div id="se-player" class="column">
            <div class="playarea">
                <div class="buttons-cols">
                    <div id="se-pause-btn" class = "pause-stop-btn"><img src="./button-imgs/pause-btn.png"></div>
                    <div id="se-play-btn" class = "play-btn"><img src="./button-imgs/play-btn.png"></div>
                    <div id= "se-stop-btn" class = "pause-stop-btn"><img src="./button-imgs/stop-btn.png"></div>
                </div>
                
                <div class="seekbar">
                    <input id="se-seekbar" type="range" value="0" step="0.1">
                    <audio id="se-audio-player" src=""></audio>
                </div>

                <div class="time"><span id = "se-time" class="ombre-text">0:00</span>
                </div>
                <div class = "audio-dropbox">
                    <select id="se-audio-select" onchange="changeAudio('se')">
                        <option value="">--Select an SE Audio--</option>
                        <option value="se-audio-1.wav">SE Audio 1</option>
                        <option value="se-audio-2.wav">SE Audio 2</option>
                        <option value="se-audio-3.wav">SE Audio 3</option>
                    </select>
                </div>
                <h2><span class="ombre-text">Standard English</span></h2>
            </div>
        </div>
        
        <div id = "ce-player" class = "column">
            <div class="playarea">
                <div class="buttons-cols">
                    <div id="ce-pause-btn" class = "pause-stop-btn"><img src="./button-imgs/pause-btn.png"></div>
                    <div id="ce-play-btn" class = "play-btn"><img src="./button-imgs/play-btn.png"></div>
                    <div id= "ce-stop-btn" class = "pause-stop-btn"><img src="./button-imgs/stop-btn.png"></div>
                </div>
                
                <div class="seekbar">
                    <input id="ce-seekbar" type="range" value="0" step="0.1">
                    <audio id="ce-audio-player" src=""></audio>
                </div>

                <div class="time"><span id = "ce-time" class="ombre-text">0:00</span>
                </div>
                <div class = "audio-dropbox">
                    <select id="ce-audio-select" onchange="changeAudio('ce')">
                        <option value="">--Select a CE Audio--</option>
                        <option value="ce-audio-1.wav">CE Audio 1</option>
                        <option value="ce-audio-2.wav">CE Audio 2</option>
                        <option value="ce-audio-3.wav">CE Audio 3</option>
                    </select>
                </div>
                <h2><span class="ombre-text">Creole English</span></h2>
            </div>
        </div>
    </div>

	<script>
        // Get text from input field
        function getData() {
            var textData = document.getElementById('textarea').value;

            console.log("Text data:", textData);
        }

        // Function to change audio file
        function changeAudio(playerId) {
            const audioSelect = document.getElementById(playerId + '-audio-select');
            const audioPlayer = document.getElementById(playerId + '-audio-player');
            var textData = document.getElementById('textarea');
            const sampleText = ["Hey, there's a Phagwa celebration today",
            "Don't get me started on Patrice, she only likes to cause Bacchanal",
            "Ah catch ah vap the other day"]

            switch(audioSelect.value){
                case("ce-audio-1.wav"):
                    textData.placeholder = sampleText[0];
                    break;
                case("ce-audio-2.wav"):
                    textData.placeholder = sampleText[1];
                    break;
                case("ce-audio-3.wav"):
                    textData.placeholder = sampleText[2];
                    break;
                case("se-audio-1.wav"):
                    textData.placeholder = sampleText[0];
                    break;
                case("se-audio-2.wav"):
                    textData.placeholder = sampleText[1];
                    break;
                case("se-audio-3.wav"):
                    textData.placeholder = sampleText[2];
                    break;
            }

            // Set the selected audio file as the source for the audio player
            audioPlayer.src =  './' + playerId + '-audio/' + audioSelect.value;
        }

        // Function to handle play, pause, and stop actions
        function toggleAudio(playerId) {
            const audioPlayer = document.getElementById(playerId + '-audio-player');
            const playBtn = document.getElementById(playerId + '-play-btn');
            const pauseBtn = document.getElementById(playerId + '-pause-btn');
            const stopBtn = document.getElementById(playerId + '-stop-btn');
    
            playBtn.addEventListener('click', () => {
                // If other player is playing it will be paused
                // before playing audio from the next
                pauseOtherPlayer(playerId);
                audioPlayer.play();
            });
    
            pauseBtn.addEventListener('click', () => {
                audioPlayer.pause();
            });
    
            stopBtn.addEventListener('click', () => {
                audioPlayer.pause();
                audioPlayer.currentTime = 0;
            });
        }
    
        // Function to pause the other player
        function pauseOtherPlayer(currentPlayerId) {
            const playerIds = ['ce', 'se'];

            playerIds.forEach(playerId => {
                if (playerId !== currentPlayerId) {
                    const otherAudioPlayer = document.getElementById(playerId + '-audio-player');
                    otherAudioPlayer.pause();
                }
            });
        }

        // Function to update seek bar and timer
        function updateSeekBar(playerId) {
            const audioPlayer = document.getElementById(playerId + '-audio-player');
            const seekbar = document.getElementById(playerId + '-seekbar');
            const timeDisplay = document.getElementById(playerId + '-time');
    
            audioPlayer.addEventListener('timeupdate', () => {
                const duration = audioPlayer.duration;
                const currentTime = audioPlayer.currentTime;
    
                // Update seek bar value
                seekbar.value = currentTime;
    
                // Update timer display
                const minutes = Math.floor(currentTime / 60);
                const seconds = Math.floor(currentTime % 60);
                const formattedTime = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                timeDisplay.textContent = formattedTime;
            });
    
            // Update seek bar max value based on audio duration
            audioPlayer.addEventListener('loadedmetadata', () => {
                seekbar.max = audioPlayer.duration;
            });
    
            // Seek functionality
            seekbar.addEventListener('input', () => {
                audioPlayer.currentTime = seekbar.value;
            });

            // Reset seek bar after the audio has ended
            audioPlayer.addEventListener('ended', () => {
                seekbar.value = 0;
                timeDisplay.textContent = '00:00';
            });
        }
    
        // Initialize for each player
        toggleAudio('ce');
        toggleAudio('se');
        updateSeekBar('ce');
        updateSeekBar('se');
    </script>
    
	
    
</body>
</html>
